<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="CustomReceiptBody"
   t-inherit="point_of_sale.OrderReceipt"
   t-inherit-mode="extension"
   owl="1">

    <!-- ========== PRODUCTS ========== -->

    <!-- PRODUCTS TABLE -->
    <xpath expr="//OrderDisplay" position="replace">
        <div dir="rtl" style="text-align:right">
                 <OrderDisplay order="order" t-slot-scope="scope" mode="'receipt'">
                <t t-set="line" t-value="scope.line"/>
                     <Orderline line="line" showTaxGroup="showTaxGroupLabels" mode="'receipt'"
                                basic_receipt="props.basic_receipt">
                    <li t-if="line.customerNote" class="customer-note w-100 p-2 my-1 rounded text-break">
                        <i class="fa fa-sticky-note me-1" role="img" aria-label="Customer Note" title="Customer Note"/>
                        <t t-esc="line.customerNote"/>
                    </li>
                </Orderline>
            </OrderDisplay>

        </div>

    </xpath>


    <!--        <div style="font-size:14px;" dir="rtr">-->


    <!--        <t t-foreach="order.lines" t-as="line" t-key="line.id">-->


    <!--        &lt;!&ndash; Product name (no code) &ndash;&gt;-->
    <!--            <div style="font-weight:bold;">-->
    <!--             <t t-esc="line.product_id.name"/>-->
    <!--        </div>-->


    <!--            <div class="d-flex justify-content-between"-->
    <!--                 style="font-size:12px; margin-bottom:6px;">-->


    <!--            &lt;!&ndash; Qty x unit price &ndash;&gt;-->
    <!--                <div>-->
    <!--                    <span dir="ltr">-->
    <!--                        <t t-esc="line.getQuantity()"/>-->
    <!--                        x-->
    <!--                        <t t-set="unit_price"-->
    <!--                           t-value="line.qty ? (line.total_price / line.qty) : 0"/>-->


    <!--                        <t t-esc="formatCurrency(unit_price)"/>                    </span>-->
    <!--            </div>-->


    <!--                &lt;!&ndash; Line total &ndash;&gt;-->
    <!--                <div dir="ltr">-->
    <!--                        <t t-esc="formatCurrency(line.prices.total_included)"/>-->
    <!--                 </div>-->


    <!--        </div>-->


    <!--        </t>-->


    <!--        </div>-->


    <!--        </xpath>-->


    <!-- ========== TOTAL ========== -->
    <xpath expr="//div[contains(@class,'receipt-total')]" position="replace">

       <div dir="rtl" class="fw-bold d-flex justify-content-between">
            <span>الإجمالي</span>
           <span dir="ltr">
                <t t-esc="formatCurrency(order.priceIncl)"/>
            </span>
        </div>

        <div dir="rtl" class="d-flex justify-content-between">
                <span>التقريب</span>
            <span dir="ltr">
                    <t t-esc="formatCurrency(order.appliedRounding)"/>
                </span>
            </div>

        <!-- ========= للسداد ========= -->
        <div dir="rtl" class="fw-bold d-flex justify-content-between border-top pt-1 mt-1">
            <span>للسداد</span>
            <span dir="ltr">
                <t t-esc="formatCurrency(order.priceIncl + order.appliedRounding)"/>
            </span>
        </div>

    </xpath>

    <!-- ========== ROUNDING ========== -->
    <xpath expr="//t[@t-if='order.appliedRounding']" position="replace">
    </xpath>
    <!--    <xpath expr="//div[contains(@class,'receipt-rounding')]" position="replace">-->

    <!--        <div dir="rtl" class="d-flex justify-content-between">-->
    <!--            <span>التقريب</span>-->
    <!--            <span dir="ltr">-->
    <!--                <t t-esc="formatCurrency(order.appliedRounding)"/>-->
    <!--            </span>-->
    <!--        </div>-->

    <!--    </xpath>-->

    <!-- ========== PAYMENTS ========== -->
    <xpath expr="//div[hasclass('text-break text-end')]" position="replace">
        <div dir="rtl" class="text-center pt-3">
        السعر شامل الضريبة
        <br/>
        المرتجع بأصل الفاتورة خلال 14 يوم للمعلبات و 24 ساعه للفريش
        <br/>
<!--        <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>-->
    </div>
    </xpath>
    <xpath expr="//div[contains(@class,'text-break text-start')]" position="replace">
    </xpath>
    <xpath expr="//div[contains(@class,'pos-receipt-order-data d-flex gap-2 pt-3')]" position="replace">
    <div dir="rtl" class="text-center pt-3">
        السعر شامل الضريبة
        <br/>
        المرتجع بأصل الفاتورة خلال 14 يوم للمعلبات و 24 ساعه للفريش
        <br/>
   </div>
<!--        <div t-if="order.date_order" id="order-date" t-out="order.formatDateOrTime('date_order')"/>-->
<!--        <div class="pos-receipt-order-data text-center pt-3">-->
<!--                <span>Powered by <b> Odoo </b></span>-->
<!--                 <div t-if="order.date_order" id="order-date" t-out="order.formatDateOrTime('date_order')"/>-->
<!--            </div>-->
</xpath>
    <xpath expr="//div[contains(@class,'paymentlines')]" position="replace">

    <t t-foreach="paymentLines" t-as="line" t-key="line.cid">

        <div dir="rtl" class="d-flex justify-content-between">
            <span>
                <t t-esc="line.payment_method?.name or 'Cash'"/>
            </span>
            <span dir="ltr">
                <t t-esc="formatCurrency(line.amount)"/>
            </span>
        </div>

    </t>

</xpath>

    <!-- ========== CHANGE ========== -->
    <xpath expr="//div[contains(@class,'receipt-change')]" position="replace">

        <div dir="rtl" class="d-flex justify-content-between">
            <span>الباقي</span>
            <span dir="ltr">
                <t t-esc="formatCurrency(order.change)"/>
            </span>
        </div>

    </xpath>
<!--     <xpath expr="//div[contains(@class,'text-center pt-3')]" position="replace">-->
<!--    </xpath>-->


</t>

</templates>